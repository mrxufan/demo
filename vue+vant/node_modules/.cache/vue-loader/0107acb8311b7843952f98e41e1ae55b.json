{"remainingRequest":"G:\\dingCanMobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\dingCanMobile\\src\\views\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\dingCanMobile\\src\\views\\index.vue","mtime":1593324529355},{"path":"G:\\dingCanMobile\\node_modules\\babel-loader\\lib\\index.js","mtime":1587344995501},{"path":"G:\\dingCanMobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1587344699430},{"path":"G:\\dingCanMobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1587344054728}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdHsKCWRhdGE6ZnVuY3Rpb24oKXsKCQlyZXR1cm57CgkJCWFkZHJlc3M6JycsLy/lrabmoKHlnLDlnYAKCQkJc2VhcmNoVGV4dDonJywvL+aQnOe0ouahhuWGheWuuQoJCQlzaG9wTGlzdDpbXSwvL+W6l+mTuuWIl+ihqAoJCQlpc0xvYWRpbmc6ZmFsc2UsCgkJCW9wZW5XZVhpblBvcHVwOmZhbHNlLAoJCQluZXdzRGV0YWlsUG9wdXA6ZmFsc2UsLy/mlrDpl7vlhazlkYoKCQkJbmV3c0xpc3Q6W10sLy/mlrDpl7vlhazlkYoKCQkJbmV3c0RldGFpbDp7fSwvL+WFrOWRiuivpuaDhQoJCX07Cgl9LAoJbWV0aG9kczp7CgkJLy8g6Z2e5b6u5L+h5rWP6KeI5Zmo5LiL5YWz6Zet5b2T5YmN5rWP6KeI5Zmo5qCH562+CgkJY2xvc2VCcm93c2VyKCl7CgkJCXdpbmRvdy5vcGVuZXI9bnVsbDsKCQkJd2luZG93Lm9wZW4oJycsJ19zZWxmJyk7CgkJCXdpbmRvdy5sb2NhdGlvbi5ocmVmPSJhYm91dDpibGFuayI7CgkJCXdpbmRvdy5jbG9zZSgpOyAKCQl9LAoJCW9uUmVmcmVzaCgpIHsKCQkgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKCQkJCSAgdGhpcy5nZXRTaG9wTGlzdChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY0lkJykpOwoJCSAgICAgICAgdGhpcy4kdG9hc3QoJ+WIt+aWsOaIkOWKnycpOwoJCSAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKCQkgICAgICB9LCAxMDAwKTsKCQkgICAgfSwKCQkvLyDngrnlh7vmkJzntKIKCQlzZWFyY2hCdG46ZnVuY3Rpb24oKXsKCQkJdmFyIF90aGlzPXRoaXM7CgkJCWlmKF90aGlzLnNlYXJjaFRleHQ9PScnKXsKCQkJCV90aGlzLiR0b2FzdCgn6K+36L6T5YWl6I+c5ZOB5ZCN56ewJyk7CgkJCQlyZXR1cm47CgkJCX0KCQkJX3RoaXMuJHJvdXRlci5wdXNoKHtwYXRoOicvc2VhcmNoR29vZHMnLHF1ZXJ5OntzZWFyY2hUZXh0Ol90aGlzLnNlYXJjaFRleHR9fSkKCQl9LAoJCS8vIOaJk+W8gOaWsOmXu+ivpuaDhQoJCW9wZW5OZXdzRGV0YWlsKG5ld3NJZCl7CgkJCXZhciBfdGhpcz10aGlzOwoJCQlfdGhpcy5uZXdzRGV0YWlsUG9wdXA9dHJ1ZTsKCQkJCgkJCV90aGlzLiRheGlvcyh7CgkJCQkgIG1ldGhvZDogJ2dldCcsCgkJCQkgIHVybDogcG9ydCsnL3YxL29yZGVybWVhbC9nZXROZXdzJywKCQkJCSAgcGFyYW1zOiB7CgkJCQkJbmV3c0lkOm5ld3NJZAoJCQkJICB9CgkJCQl9KS50aGVuKGZ1bmN0aW9uKGRhdGEpewoJCQkJCWNvbnNvbGUubG9nKCfmlrDpl7vlhazlkYror6bmg4UnLGRhdGEpCgkJCQkJaWYgKGRhdGEuZGF0YS5zdGF0dXM9PTIwMCkgewoJCQkJCQlfdGhpcy5uZXdzRGV0YWlsPWRhdGEuZGF0YS5kYXRhOwoJCQkJCX0KCQkJCQkKCQkJCX0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKXsKCQkJCQljb25zb2xlLmxvZyhlcnJvcik7CgkJCQl9KTsKCQkJCgkJCWNvbnNvbGUubG9nKG5ld3NJZCkKCQl9LAoJCS8vIOiOt+WPluaWsOmXu+WFrOWRigoJCWdldE5ld3NMaXN0KCl7CgkJCXZhciBfdGhpcz10aGlzCgkJCV90aGlzLiRheGlvcyh7CgkJCQkgIG1ldGhvZDogJ2dldCcsCgkJCQkgIHVybDogcG9ydCsnL3YxL29yZGVybWVhbC9xdWVyeU5ld3NLaW5kQnljSWQnLAoJCQkJICBwYXJhbXM6IHsKCQkJCQljSWQ6bG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NJZCcpCgkJCQkgIH0KCQkJCX0pLnRoZW4oZnVuY3Rpb24oZGF0YSl7CgkJCQkJY29uc29sZS5sb2coJ+aWsOmXu+WFrOWRiicsZGF0YSkKCQkJCQlpZiAoZGF0YS5kYXRhLnN0YXR1cz09MjAwKSB7CgkJCQkJCV90aGlzLm5ld3NMaXN0PWRhdGEuZGF0YS5kYXRhOwoJCQkJCX0KCQkJCQkKCQkJCX0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKXsKCQkJCQljb25zb2xlLmxvZyhlcnJvcik7CgkJCQl9KTsKCQkgIAoJCX0sCgkJLy8g5p+l6K+i5Y2V5L2N5L+h5oGv77yM55So5p2l5p+lY0lkCgkJZ2V0VW5pdE5vKG5vKXsKCQkJbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NObycsbm8pOwoJCQl2YXIgX3RoaXM9dGhpczsKCQkJCgkJCV90aGlzLiRheGlvcyh7CgkJCQkgIG1ldGhvZDogJ2dldCcsCgkJCQkgIHVybDogcG9ydCsnL3YxL29yZGVybWVhbC9xdWVyeUNvbXBhbnlCeWNObycsCgkJCQkgIHBhcmFtczogewoJCQkJCWNObzpubwoJCQkJICB9CgkJCQl9KS50aGVuKGZ1bmN0aW9uKGRhdGEpewoJCQkJCWNvbnNvbGUubG9nKCfmn6Xor6LljZXkvY3kv6Hmga8nLGRhdGEpCgkJCQkJaWYgKGRhdGEuZGF0YS5zdGF0dXM9PTIwMCkgewoJCQkJCQlfdGhpcy5hZGRyZXNzPWRhdGEuZGF0YS5kYXRhLmNOYW1lOwoJCQkJCQlsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY0lkJyxkYXRhLmRhdGEuZGF0YS5jSWQpCgkJCQkJCV90aGlzLmdldFNob3BMaXN0KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjSWQnKSk7Ly/lhYjpgJrov4flj4LmlbDnvJblj7fmn6Xor6JjSWTvvIzlho3mi7/liLBjSWTljrvlvZPliY3ljZXkvY3lupfpk7rkv6Hmga8KCQkJCQkJX3RoaXMuZ2V0TmV3c0xpc3QoKTsvL+aWsOmXu+WFrOWRigoJCQkJCQkvLyDlrZjlgqjljZXkvY3kv6Hmga8KCQkJCQkJbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VuaXRJbmZvJyxKU09OLnN0cmluZ2lmeShkYXRhLmRhdGEuZGF0YSkpCgkJCQkJfQoJCQkJCQoJCQkJfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpewoJCQkJCWNvbnNvbGUubG9nKGVycm9yKTsKCQkJCX0pOwoJCX0sCgkJLy8g6I635Y+W5ZWG6ZO65YiX6KGoCgkJZ2V0U2hvcExpc3QoY0lkKXsKCQkJdmFyIF90aGlzPXRoaXMKCQkJCXZhciBsb2FkPV90aGlzLiR0b2FzdC5sb2FkaW5nKHsKCQkJCSAgbWVzc2FnZTogJ+WKoOi9veS4rS4uLicsCgkJCQkgIGR1cmF0aW9uOjAsCgkJCQkgIGZvcmJpZENsaWNrOiB0cnVlLAoJCQkJfSk7CgkJCQlfdGhpcy4kYXhpb3MoewoJCQkJCSAgbWV0aG9kOiAnZ2V0JywKCQkJCQkgIHVybDogcG9ydCsnL3YxL29yZGVybWVhbC9xdWVyeVNob3BCeWNJZCcsCgkJCQkJICBwYXJhbXM6IHsKCQkJCQkJY0lkOmNJZAoJCQkJCSAgfQoJCQkJCX0pLnRoZW4oZnVuY3Rpb24oZGF0YSl7CgkJCQkJCWNvbnNvbGUubG9nKCflupfpk7rliJfooagnLGRhdGEpCgkJCQkJCWxvYWQuY2xlYXIoKTsKCQkJCQkJaWYgKGRhdGEuZGF0YS5zdGF0dXM9PTIwMCkgewoJCQkJCQkJX3RoaXMuc2hvcExpc3Q9ZGF0YS5kYXRhLmRhdGEKCQkJCQkJCV90aGlzLnNob3BMaXN0LmZvckVhY2goZnVuY3Rpb24oYSl7CgkJCQkJCQkJaWYgKCFhLnNob3BQaWMpIHsKCQkJCQkJCQkJYS5zaG9wUGljPScuL3N0YXRpYy9pbWFnZXMvaWNvbi9kZWZhdWx0MS5wbmcnOwoJCQkJCQkJCX1lbHNlewoJCQkJCQkJCQlhLnNob3BQaWM9d2luUG9ydCthLnNob3BQaWM7CgkJCQkJCQkJfQoJCQkJCQkJfSkKCQkJCQkJCQoJCQkJCQl9CgkJCQkJCQoJCQkJCX0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKXsKCQkJCQkJY29uc29sZS5sb2coZXJyb3IpOwoJCQkJCX0pOwoJCSAgCgkJfSwKCgkJLy8g6Lez6L2s5Yiw56qX5Y+j5YiX6KGoLOaKiuW6l+mTumlk5Lyg6YCS6L+H5Y67CgkJdG9XaW5MaXN0KGluZGV4LGlkLHNob3BOYW1lKXsKCQkJdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6Jy93aW5MaXN0JyxxdWVyeTp7c2hvcElkOmlkLHNob3BOYW1lOnNob3BOYW1lfX0pCgkJfQoJCQoJfSwKCWNyZWF0ZWQ6ZnVuY3Rpb24oKXsKCQl2YXIgX3RoaXM9dGhpczsKCQkKCQkvLyDliKTmlq3lpoLmnpzkuI3mmK/lnKjlvq7kv6HmtY/op4jlmajvvIzliJnmiZPlvIDmj5DnpLrlvLnnqpcKCQl2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7CgkJaWYodWEubWF0Y2goL01pY3JvTWVzc2VuZ2VyL2kpIT0ibWljcm9tZXNzZW5nZXIiKXsKCQkJICAvLyBfdGhpcy5vcGVuV2VYaW5Qb3B1cD10cnVlOwoJCX0KCQkKCQl2YXIgY05vPWdldFVybEtleSgnY05vJyk7Ly/ojrflj5Z1cmznvJblj7flj4LmlbAKCQlpZihjTm8pewoJCQlsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY05vJyxjTm8pOwoJCX0KCQlfdGhpcy5nZXRVbml0Tm8obG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NObycpKS8v5Lyg5YWl5Y2V5L2N57yW5Y+3Cgl9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div class=\"index\" style=\"padding-bottom: 40px;\">\r\n\t\t\r\n\t\t<!-- 顶部搜索 -->\r\n\t\t<div style=\"height: 40px;\">\r\n\t\t\t<div class=\"index-search-nav\">\r\n\t\t\t\t<div class=\"address-wrap\">\r\n\t\t\t\t\t<i class=\"iconfont icon-wodedizhi\"></i>\r\n\t\t\t\t\t<p class=\"add\">{{address}}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"address-search\">\r\n\t\t\t\t\t<i class=\"iconfont icon-fangdajing\" @click=\"searchBtn()\"></i>\r\n\t\t\t\t\t<input type=\"text\" autocomplete=\"off\" placeholder=\"搜索你喜爱的菜品\" v-model=\"searchText\">\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<!-- 下拉刷新 -->\r\n\t\t<van-pull-refresh v-model=\"isLoading\" @refresh=\"onRefresh\">\r\n\t\t  \r\n\t\t\t<!-- 轮播图 -->\r\n\t\t\t<div class=\"slide-wrap\">\r\n\t\t\t\t<van-swipe :autoplay=\"3000\" indicator-color=\"white\">\r\n\t\t\t\t  <van-swipe-item><img src=\"../../public/static/images/slide1.png\" width=\"100%\"></van-swipe-item>\r\n\t\t\t\t  <van-swipe-item><img src=\"../../public/static/images/slide2.png\" width=\"100%\"></van-swipe-item>\r\n\t\t\t\t  <van-swipe-item><img src=\"../../public/static/images/slide3.png\" width=\"100%\"></van-swipe-item>\r\n\t\t\t\t</van-swipe>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"shop-nav-wrap\">\r\n\t\t\t\t<van-grid :border=\"false\" :column-num=\"4\" clickable >\r\n\t\t\t\t  <van-grid-item v-for=\"(item,index) in shopList\" @click=\"toWinList(index,item.shopId,item.shopName)\" :data-id=\"item.shopId\" :data-shopname=\"item.shopName\">\r\n\t\t\t\t\t<img :src=\"item.shopPic\">\r\n\t\t\t\t\t<p class=\"shop-name\">{{item.shopName}}</p>\r\n\t\t\t\t  </van-grid-item>\r\n\t\t\t\t</van-grid>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"middle-img\" style=\"margin:0 10px;position: relative;top: -10px;\">\r\n\t\t\t\t<img src=\"../../public/static/images/index_img.png\" width=\"100%\">\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<div class=\"news-post\">\r\n\t\t\t\t<div class=\"news-item\" v-for=\"item in newsList\">\r\n\t\t\t\t\t<van-cell-group>\r\n\t\t\t\t\t  <van-cell :title=\"item.kindName\" />\r\n\t\t\t\t\t  <van-swipe style=\"height: 40px;\" class=\"my-swipe\" :autoplay=\"3000\" indicator-color=\"white\" vertical>\r\n\t\t\t\t\t    <van-swipe-item v-for=\"newsItem in item.newsList\"><van-cell v-on:click=\"openNewsDetail(newsItem.newsId)\" title-class=\"cell-title\" :title=\"newsItem.title\" /></van-swipe-item>\r\n\t\t\t\t\t  </van-swipe>\r\n\t\t\t\t\t</van-cell-group>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\r\n\t\t</van-pull-refresh>\r\n\t\t\r\n\t\t<!-- 打开微信弹窗 -->\r\n\t\t<van-popup :close-on-click-overlay=\"false\" :style=\"{width:'80%', height: '170px',borderRadius:'10px'}\" v-model=\"openWeXinPopup\">\r\n\t\t\t<div class=\"open-wexin-wrap\">\r\n\t\t\t\t<p class=\"tit\">温馨提示</p>\r\n\t\t\t\t<p class=\"txt\">即将打开微信</p>\r\n\t\t\t</div>\r\n\t\t\t<a href=\"weixin://\" class=\"comfirm-btn\" v-on:click=\"closeBrowser\">确定</a>\r\n\t\t</van-popup>\r\n\t\t\r\n\t\t<!-- 新闻公告详情 -->\r\n\t\t<van-popup position=\"right\" :style=\"{width:'100%', height: '100%'}\" v-model=\"newsDetailPopup\">\r\n\t\t\t<!-- popup内头部 -->\r\n\t\t\t<div class=\"popup-header\">\r\n\t\t\t\t<span class=\"back iconfont icon-zuojiantou\" v-on:click=\"newsDetailPopup=false\"></span>公告详情\r\n\t\t\t</div>\r\n\t\t\t<!-- popup内容区 -->\r\n\t\t\t<div class=\"popup-main\" style=\"height: calc(100% - 40px);\">\r\n\t\t\t\t<h1 class=\"newsdetail-tit\">{{newsDetail.title}}</h1>\r\n\t\t\t\t<div class=\"newsdetail-content\" v-html=\"newsDetail.content\">{{newsDetail.content}}</div>\r\n\t\t\t</div>\r\n\t\t</van-popup>\r\n\t\t\r\n\t</div>\r\n</template>\r\n\r\n<script type=\"text/javascript\">\r\n\t\r\n\texport default{\r\n\t\tdata:function(){\r\n\t\t\treturn{\r\n\t\t\t\taddress:'',//学校地址\r\n\t\t\t\tsearchText:'',//搜索框内容\r\n\t\t\t\tshopList:[],//店铺列表\r\n\t\t\t\tisLoading:false,\r\n\t\t\t\topenWeXinPopup:false,\r\n\t\t\t\tnewsDetailPopup:false,//新闻公告\r\n\t\t\t\tnewsList:[],//新闻公告\r\n\t\t\t\tnewsDetail:{},//公告详情\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t// 非微信浏览器下关闭当前浏览器标签\r\n\t\t\tcloseBrowser(){\r\n\t\t\t\twindow.opener=null;\r\n\t\t\t\twindow.open('','_self');\r\n\t\t\t\twindow.location.href=\"about:blank\";\r\n\t\t\t\twindow.close(); \r\n\t\t\t},\r\n\t\t\tonRefresh() {\r\n\t\t\t      setTimeout(() => {\r\n\t\t\t\t\t  this.getShopList(localStorage.getItem('cId'));\r\n\t\t\t        this.$toast('刷新成功');\r\n\t\t\t        this.isLoading = false;\r\n\t\t\t      }, 1000);\r\n\t\t\t    },\r\n\t\t\t// 点击搜索\r\n\t\t\tsearchBtn:function(){\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\tif(_this.searchText==''){\r\n\t\t\t\t\t_this.$toast('请输入菜品名称');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t_this.$router.push({path:'/searchGoods',query:{searchText:_this.searchText}})\r\n\t\t\t},\r\n\t\t\t// 打开新闻详情\r\n\t\t\topenNewsDetail(newsId){\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\t_this.newsDetailPopup=true;\r\n\t\t\t\t\r\n\t\t\t\t_this.$axios({\r\n\t\t\t\t\t  method: 'get',\r\n\t\t\t\t\t  url: port+'/v1/ordermeal/getNews',\r\n\t\t\t\t\t  params: {\r\n\t\t\t\t\t\tnewsId:newsId\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}).then(function(data){\r\n\t\t\t\t\t\tconsole.log('新闻公告详情',data)\r\n\t\t\t\t\t\tif (data.data.status==200) {\r\n\t\t\t\t\t\t\t_this.newsDetail=data.data.data;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}).catch(function(error){\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(newsId)\r\n\t\t\t},\r\n\t\t\t// 获取新闻公告\r\n\t\t\tgetNewsList(){\r\n\t\t\t\tvar _this=this\r\n\t\t\t\t_this.$axios({\r\n\t\t\t\t\t  method: 'get',\r\n\t\t\t\t\t  url: port+'/v1/ordermeal/queryNewsKindBycId',\r\n\t\t\t\t\t  params: {\r\n\t\t\t\t\t\tcId:localStorage.getItem('cId')\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}).then(function(data){\r\n\t\t\t\t\t\tconsole.log('新闻公告',data)\r\n\t\t\t\t\t\tif (data.data.status==200) {\r\n\t\t\t\t\t\t\t_this.newsList=data.data.data;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}).catch(function(error){\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t  \r\n\t\t\t},\r\n\t\t\t// 查询单位信息，用来查cId\r\n\t\t\tgetUnitNo(no){\r\n\t\t\t\tlocalStorage.setItem('cNo',no);\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\t\r\n\t\t\t\t_this.$axios({\r\n\t\t\t\t\t  method: 'get',\r\n\t\t\t\t\t  url: port+'/v1/ordermeal/queryCompanyBycNo',\r\n\t\t\t\t\t  params: {\r\n\t\t\t\t\t\tcNo:no\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}).then(function(data){\r\n\t\t\t\t\t\tconsole.log('查询单位信息',data)\r\n\t\t\t\t\t\tif (data.data.status==200) {\r\n\t\t\t\t\t\t\t_this.address=data.data.data.cName;\r\n\t\t\t\t\t\t\tlocalStorage.setItem('cId',data.data.data.cId)\r\n\t\t\t\t\t\t\t_this.getShopList(localStorage.getItem('cId'));//先通过参数编号查询cId，再拿到cId去当前单位店铺信息\r\n\t\t\t\t\t\t\t_this.getNewsList();//新闻公告\r\n\t\t\t\t\t\t\t// 存储单位信息\r\n\t\t\t\t\t\t\tlocalStorage.setItem('unitInfo',JSON.stringify(data.data.data))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}).catch(function(error){\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 获取商铺列表\r\n\t\t\tgetShopList(cId){\r\n\t\t\t\tvar _this=this\r\n\t\t\t\t\tvar load=_this.$toast.loading({\r\n\t\t\t\t\t  message: '加载中...',\r\n\t\t\t\t\t  duration:0,\r\n\t\t\t\t\t  forbidClick: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\t_this.$axios({\r\n\t\t\t\t\t\t  method: 'get',\r\n\t\t\t\t\t\t  url: port+'/v1/ordermeal/queryShopBycId',\r\n\t\t\t\t\t\t  params: {\r\n\t\t\t\t\t\t\tcId:cId\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t}).then(function(data){\r\n\t\t\t\t\t\t\tconsole.log('店铺列表',data)\r\n\t\t\t\t\t\t\tload.clear();\r\n\t\t\t\t\t\t\tif (data.data.status==200) {\r\n\t\t\t\t\t\t\t\t_this.shopList=data.data.data\r\n\t\t\t\t\t\t\t\t_this.shopList.forEach(function(a){\r\n\t\t\t\t\t\t\t\t\tif (!a.shopPic) {\r\n\t\t\t\t\t\t\t\t\t\ta.shopPic='./static/images/icon/default1.png';\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\ta.shopPic=winPort+a.shopPic;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}).catch(function(error){\r\n\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t});\r\n\t\t\t  \r\n\t\t\t},\r\n\r\n\t\t\t// 跳转到窗口列表,把店铺id传递过去\r\n\t\t\ttoWinList(index,id,shopName){\r\n\t\t\t\tthis.$router.push({path:'/winList',query:{shopId:id,shopName:shopName}})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\tcreated:function(){\r\n\t\t\tvar _this=this;\r\n\t\t\t\r\n\t\t\t// 判断如果不是在微信浏览器，则打开提示弹窗\r\n\t\t\tvar ua = navigator.userAgent.toLowerCase();\r\n\t\t\tif(ua.match(/MicroMessenger/i)!=\"micromessenger\"){\r\n\t\t\t\t  // _this.openWeXinPopup=true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar cNo=getUrlKey('cNo');//获取url编号参数\r\n\t\t\tif(cNo){\r\n\t\t\t\tlocalStorage.setItem('cNo',cNo);\r\n\t\t\t}\r\n\t\t\t_this.getUnitNo(localStorage.getItem('cNo'))//传入单位编号\r\n\t\t}\r\n\t}\r\n</script>\r\n<style type=\"text/css\">\r\n\r\n/* 首页顶部搜索 */\r\n.index-search-nav{position: fixed;width: 100%;left: 0;top: 0;background: #F4BE42;height: 40px;line-height: 40px;padding-left: 150px;box-sizing: border-box;z-index: 3;}\r\n.index-search-nav .address-wrap{position: absolute;padding-left: 40px;left: 0;top: 0;width: 32%;}\r\n.index-search-nav .address-wrap .iconfont{position: absolute;left: 0;top: 0;width: 40px;height: 40px;text-align: center;line-height: 40px;color: #fff;}\r\n.index-search-nav .address-wrap .add{overflow: hidden;white-space: nowrap;text-overflow: ellipsis;font-size: 12px;}\r\n.index-search-nav .address-search{border-radius: 40px;overflow: hidden;background: #fff;height: 30px;top: 5px;padding-left: 30px;box-sizing: border-box;position: absolute;right: 10px;width: 55%;}\r\n.index-search-nav .address-search .iconfont{position: absolute;left: 0;top: 0;width: 30px;height: 30px;text-align: center;line-height: 30px;color: #F4BE42;}\r\n.index-search-nav .address-search .iconfont:active{background: #f9f9f9;}\r\n.index-search-nav .address-search input{width: 80%;height: 100%;border: none;position: absolute;}\r\n.index-search-nav .address-search input::-webkit-input-placeholder{font-size: 12px;color: #999;}\r\n\r\n.shop-nav-wrap{background: #fff;margin: 0 10px;position: relative;top: -20px;border-radius: 6px;overflow: hidden;}\r\n.shop-nav-wrap img{width: 50px;height: 50px;}\r\n.shop-nav-wrap .shop-name{overflow: hidden;white-space: nowrap;text-overflow: ellipsis;display: block;width: 58px;text-align: center;color: #666;margin-top: 4px;font-size: 12px;}\r\n.open-wexin-wrap{text-align: center;}\r\n.open-wexin-wrap .tit{font-size: 18px;padding: 20px 0;}\r\n.comfirm-btn{position: absolute;width: 100%;left: 0;bottom: 0;padding: 15px 0;text-align: center;font-size: 18px;border-top: 1px solid #eee;color: #1989fa;}\r\n.comfirm-btn:active{background: #f9f9f9;}\r\n\r\n.news-post{margin: 0 10px 10px 10px;}\r\n.news-post .van-cell{display: block;}\r\n.news-post .van-cell span{display: block;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}\r\n.news-post .news-item{margin-bottom: 10px;border-radius: 10px;overflow: hidden;}\r\n.news-post .cell-title{color: #999;}\r\n\r\n.newsdetail-tit{text-align: center;font-size: 16px;font-weight:bold;margin: 10px;}\r\n.newsdetail-content{margin: 10px;}\r\n</style>"]}]}