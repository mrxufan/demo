{"remainingRequest":"G:\\dingCanMobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\dingCanMobile\\src\\views\\orderList.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"G:\\dingCanMobile\\src\\views\\orderList.vue","mtime":1593332022676},{"path":"G:\\dingCanMobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":1587344362830},{"path":"G:\\dingCanMobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1587344055013},{"path":"G:\\dingCanMobile\\node_modules\\postcss-loader\\src\\index.js","mtime":1587344830790},{"path":"G:\\dingCanMobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1587344699430},{"path":"G:\\dingCanMobile\\node_modules\\vue-loader\\lib\\index.js","mtime":1587344054728}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5vcmRlci1saXN0LXdyYXAgLnNob3AtdGl0e3Bvc2l0aW9uOiByZWxhdGl2ZTtwYWRkaW5nLXJpZ2h0OiAxMDBweDt9DQoub3JkZXItbGlzdC13cmFwIGxpe2JhY2tncm91bmQ6ICNmZmY7b3ZlcmZsb3c6IGhpZGRlbjttYXJnaW46IDEwcHg7cGFkZGluZzogMTBweDtib3JkZXItcmFkaXVzOiA0cHg7fQ0KLndpbi10aXQtd3JhcHtwYWRkaW5nLXJpZ2h0OiA4MHB4O3Bvc2l0aW9uOiByZWxhdGl2ZTtib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTtwYWRkaW5nLWJvdHRvbTogMTBweDt9DQoud2luLXRpdC13cmFwIGltZ3t3aWR0aDogNTBweDtoZWlnaHQ6IDUwcHg7ZmxvYXQ6IGxlZnQ7bWFyZ2luLXJpZ2h0OiAxMHB4O30NCi53aW4tbmFtZXtsaW5lLWhlaWdodDogNTBweDtmb250LXNpemU6IDE2cHg7Y29sb3I6ICMzMzM7b3ZlcmZsb3c6IGhpZGRlbjt3aGl0ZS1zcGFjZTogbm93cmFwO3RleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO30NCi53aW4tdGl0LXdyYXAgLnN0YXRle3Bvc2l0aW9uOiBhYnNvbHV0ZTtyaWdodDogMDtsaW5lLWhlaWdodDogNTBweDt0b3A6IDA7Zm9udC1zaXplOiAxMnB4O2NvbG9yOiAjOTk5O30NCg0KLm9yZGVyLWxpc3QgcHtjb2xvcjogIzY2NjttYXJnaW4tdG9wOiA0cHg7fQ0KLm9yZGVyLXRvdGFsLXdyYXB7dGV4dC1hbGlnbjogcmlnaHQ7fQ0KLm9yZGVyLXRvdGFsLXdyYXAgc3BhbjpudGgtY2hpbGQoMSl7bWFyZ2luLXJpZ2h0OiAxMHB4O30NCi5vcmRlci10b3RhbC13cmFwIC50b3RhbHtmb250LXdlaWdodDogYm9sZDt9DQoub3JkZXItdG90YWwtd3JhcHtib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTtwYWRkaW5nLWJvdHRvbTogNXB4O30NCi5vcmRlci1idG57dGV4dC1hbGlnbjogcmlnaHQ7fQ0KLm9yZGVyLWJ0biBzcGFue2ZvbnQtc2l6ZTogMTRweDtjb2xvcjogIzMzMztib3JkZXI6IDFweCBzb2xpZCAjZGRkO3BhZGRpbmc6IDVweCAxMHB4O2Rpc3BsYXk6IGlubGluZS1ibG9jaztib3JkZXItcmFkaXVzOiA1cHg7bWFyZ2luLXJpZ2h0OiAxMHB4O21hcmdpbi10b3A6IDEwcHg7fQ0KLm9yZGVyLWJ0biBzcGFuOmFjdGl2ZXtiYWNrZ3JvdW5kOiAjZjlmOWY5O30NCi5vcmRlci1idG4gc3BhbjpsYXN0LWNoaWxke21hcmdpbi1yaWdodDogMDt9DQoNCi5vcmRlci1kZXRhaWwtdG9we2JhY2tncm91bmQ6ICNmZmY7dGV4dC1hbGlnbjogY2VudGVyO21hcmdpbjogMTBweDtwYWRkaW5nOiAxMHB4O2JvcmRlci1yYWRpdXM6IDZweDt9DQoub3JkZXItZGV0YWlsLXRvcCBwe21hcmdpbjogNHB4IDA7fQ0KLm9yZGVyLWRldGFpbC10b3AgLnRpbWV7Y29sb3I6ICNGRkJEMjc7fQ0KDQouc2VsbGVyLXBob25le3RleHQtYWxpZ246IGNlbnRlcjtwYWRkaW5nOiAxMHB4O2JhY2tncm91bmQ6ICNmZmY7Y29sb3I6ICMzMzM7ZGlzcGxheTogYmxvY2s7Ym9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7fQ0KLnNlbGxlci1waG9uZSAuaWNvbmZvbnR7Y29sb3I6ICNGRkJEMjc7bWFyZ2luLXJpZ2h0OiA1cHg7fQ0KDQouc2VsbGVyLWluZm97YmFja2dyb3VuZDogI2ZmZjtib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTtwYWRkaW5nOiAxNXB4O292ZXJmbG93OiBoaWRkZW47fQ0KLnNlbGxlci1pbmZvIGltZ3t3aWR0aDogNDBweDtoZWlnaHQ6IDQwcHg7ZmxvYXQ6IGxlZnQ7bWFyZ2luLXJpZ2h0OiAxMHB4O30NCi5zZWxsZXItaW5mbyBwe292ZXJmbG93OiBoaWRkZW47dGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7d2hpdGUtc3BhY2U6IG5vd3JhcDt9DQouc2VsbGVyLWluZm8gcC5zZWxsZXItbmFtZXtmb250LXdlaWdodDogYm9sZDt9DQoNCi5hc3Nlc3MtaXRlbXtiYWNrZ3JvdW5kOiAjZmZmO21hcmdpbjogMTBweDtib3JkZXItcmFkaXVzOiA2cHg7cGFkZGluZzogMTBweDt9DQouYXNzZXNzLWl0ZW0gLmhlYWQtaW1nIGltZ3t3aWR0aDogNDBweDtoZWlnaHQ6IDQwcHg7bWFyZ2luLXJpZ2h0OiAxMHB4O30NCi5hc3Nlc3MtaXRlbSAuaGVhZC1pbWd7b3ZlcmZsb3c6IGhpZGRlbjt0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczt3aGl0ZS1zcGFjZTogbm93cmFwO30NCg0KLnBsZWFzZWQtd3JhcHtkaXNwbGF5OiBmbGV4O21hcmdpbi10b3A6IDEwcHg7fQ0KLnBsZWFzZWQtd3JhcCBzcGFue2ZsZXg6IDE7dGV4dC1hbGlnbjogY2VudGVyO2hlaWdodDogMzVweDtsaW5lLWhlaWdodDogMzVweDtiYWNrZ3JvdW5kOiAjRjVGNUY1O2JvcmRlci1yYWRpdXM6IDRweDt9DQoucGxlYXNlZC13cmFwIHNwYW4gLmljb25mb250e2NvbG9yOiAjOTk5O21hcmdpbi1yaWdodDogNnB4O30NCi5wbGVhc2VkLXdyYXAgc3Bhbi5hY3RpdmV7YmFja2dyb3VuZDogI0ZFRjlFNjtjb2xvcjogI0ZGQjIwMDt9DQoucGxlYXNlZC13cmFwIHNwYW4uYWN0aXZlIC5pY29uZm9udHtjb2xvcjogI0ZGQjIwMDt9DQoucGxlYXNlZC13cmFwIHNwYW46bnRoLWNoaWxkKDEpe21hcmdpbi1yaWdodDogMTBweDt9DQoNCi5hc3Nlc3MtbXNne21hcmdpbi10b3A6IDEwcHg7fQ0KLmFzc2Vzcy1tc2cgc3BhbntiYWNrZ3JvdW5kOiAjZjVmNWY1O3BhZGRpbmc6IDRweCA4cHg7ZGlzcGxheTogaW5saW5lLWJsb2NrO21hcmdpbi1yaWdodDogMTBweDtib3JkZXItcmFkaXVzOiAzcHg7Zm9udC1zaXplOiAxMnB4O21hcmdpbi1ib3R0b206IDEwcHg7fQ0KLmFzc2Vzcy1tc2cgc3Bhbi5hY3RpdmV7YmFja2dyb3VuZDogI0Y0QkU0Mjt9DQoNCi5hc3Nlc3Mtc3Rhci13cmFwe21hcmdpbjoxMHB4IDA7fQ0KLmFzc2Vzcy1yZW1hcmsgLnZhbi1jZWxse2JhY2tncm91bmQ6ICNmNWY1ZjU7fQ0KLnVwbG9hZC1pbWd7bWFyZ2luLXRvcDogMTBweDt9DQoNCi5zdGFyLWFzc2Vzc3ttYXJnaW4tdG9wOiA1cHg7fQ0KLnN0YXItbmFtZXttYXJnaW4tcmlnaHQ6IDEwcHg7dmVydGljYWwtYWxpZ246IHN1cGVyO30NCi5hc3Nlc3Mtc3Rhci13cmFwIC5hc3Nlc3NUZXh0e2NvbG9yOiAjOTk5O21hcmdpbi1sZWZ0OiAxMHB4O30NCg0KLm9yZGVyLXRyYWNrLXdyYXB7cG9zaXRpb246IGFic29sdXRlO3dpZHRoOiAxMDAlO2JhY2tncm91bmQ6ICNmZmY7bGVmdDogMDtib3R0b206IDYwcHg7Ym9yZGVyLXJhZGl1czogNnB4O30NCi5vcmRlci10cmFjay13cmFwIC5vcmRlci10cmFjay10aXR7cGFkZGluZzogMTBweDt0ZXh0LWFsaWduOiBjZW50ZXI7Zm9udC1zaXplOiAxNnB4O2JvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlO30NCi5vcmRlci10cmFjay13cmFwIC5vcmRlci10cmFjay1tYWlue2hlaWdodDogMjUwcHg7b3ZlcmZsb3cteTogYXV0bztwYWRkaW5nOiAxMHB4O2JveC1zaXppbmc6IGJvcmRlci1ib3g7fQ0KLm9yZGVyLXRyYWNrLWNhbmNlbHtwYWRkaW5nOiAxMHB4O3RleHQtYWxpZ246IGNlbnRlcjtmb250LXNpemU6IDE2cHg7cG9zaXRpb246IGFic29sdXRlO3dpZHRoOiAxMDAlO2JhY2tncm91bmQ6ICNmZmY7bGVmdDogMDtib3R0b206IDEwcHg7Ym9yZGVyLXJhZGl1czogNnB4O2JveC1zaXppbmc6IGJvcmRlci1ib3g7fQ0KDQoub3JkZXItdHJhY2stbGlzdCBsaXtwb3NpdGlvbjogcmVsYXRpdmU7bWFyZ2luLWJvdHRvbTogMTVweDt9DQoub3JkZXItdHJhY2stbGlzdCBsaSAub3JkZXItdHJhY2stc2VuZC1waG9uZSBhe2NvbG9yOiAjRjRCRTQyO30NCi5vcmRlci10cmFjay1saXN0IC5vcmRlci10cmFjay1pdGVte2Rpc3BsYXk6IGZsZXg7anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO3BhZGRpbmctbGVmdDogMjBweDt9DQoub3JkZXItdHJhY2stbGlzdCBsaTpiZWZvcmV7Y29udGVudDogJyc7cG9zaXRpb246IGFic29sdXRlO3dpZHRoOiA1cHg7aGVpZ2h0OiA1cHg7YmFja2dyb3VuZDogI0Y0QkU0Mjtib3JkZXItcmFkaXVzOiA1MCU7bGVmdDogNXB4O3RvcDogNnB4O30NCi5vcmRlci10cmFjay1saXN0IGxpOmFmdGVye2NvbnRlbnQ6ICcnO3Bvc2l0aW9uOiBhYnNvbHV0ZTt3aWR0aDogMXB4O2hlaWdodDogMTIwJTtsZWZ0OiA3cHg7dG9wOiAxNHB4O2JhY2tncm91bmQ6ICNGNEJFNDI7fQ0KLm9yZGVyLXRyYWNrLWxpc3QgbGk6bGFzdC1jaGlsZDphZnRlcntkaXNwbGF5OiBub25lO30NCi5vcmRlci10cmFjay1saXN0IC5kYXRle2NvbG9yOiAjOTk5O2ZvbnQtc2l6ZTogMTJweDt9DQoub3JkZXItdHJhY2stc2VuZC1waG9uZXtwYWRkaW5nLWxlZnQ6IDIwcHg7bWFyZ2luLXRvcDogNHB4O2NvbG9yOiAjNjY2O30NCi5jZWxsLXZhbHVle2ZsZXg6IG5vbmU7fQ0K"},{"version":3,"sources":["orderList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0hCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"orderList.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<!-- 顶部导航 -->\r\n\t\t<top-fixed-nav :title=\"title\"></top-fixed-nav>\r\n\t\t\r\n\t\t\t<!-- 下拉刷新 -->\r\n\t\t<van-pull-refresh v-model=\"refreshLoading\" @refresh=\"onRefresh\">\r\n\t\t\t<div class=\"order-list-wrap\" style=\"min-height: 300px;\">\r\n\t\t\t\t<p v-if=\"orderList.length<=0\" style=\"text-align: center;margin: 15px;\">暂无订单</p>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li v-for=\"item in orderList\" v-on:click=\"openOrderDetail(item.orderNo)\">\r\n\t\t\t\t\t\t<div class=\"win-tit-wrap\">\r\n\t\t\t\t\t\t\t<img :src=\"item.picUrl\" alt=\"\">\r\n\t\t\t\t\t\t\t<p class=\"win-name\">{{item.sellerWinName}}</p>\r\n\t\t\t\t\t\t\t<span class=\"state\">{{item.orderType}}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"order-list\">\r\n\t\t\t\t\t\t\t<p v-for=\"order in item.orderGoodses\">{{order.gName}}*{{order.buyCounter}}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"order-total-wrap\"><span>共{{item.goodsNum}}件商品</span><span>总计<i class=\"total\">￥{{item.orderMode==2?item.totalAmount:item.totalAmount-item.deliveryFee}}</i></span></div>\r\n\t\t\t\t\t\t<div class=\"order-btn\">\r\n\t\t\t\t\t\t\t<span v-if=\"item.orderState==1\" v-on:click.stop=\"goPay(item.orderNo,item.sellerId,item.totalAmount)\">立即支付</span>\r\n\t\t\t\t\t\t\t<span v-if=\"item.orderState==5||item.orderState==8\" v-on:click.stop=\"cuiDan(item.orderNo)\">催单</span>\r\n\t\t\t\t\t\t\t<span v-if=\"item.orderState==8\" v-on:click.stop=\"confirmService(item.orderNo)\">确认送达</span>\r\n\t\t\t\t\t\t\t<span v-if=\"item.orderState==9\" v-on:click.stop=\"openAssessPopup(item.orderNo,item.picUrl,item.sellerWinName)\">立即评价</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</van-pull-refresh>\r\n\t\t\r\n\t\t<!-- 订单详情 -->\r\n\t\t<van-popup position=\"right\" :style=\"{width:'100%', height: '100%',background:'#eee'}\" v-model=\"orderDetailPopup\">\r\n\t\t\t<!-- popup内头部 -->\r\n\t\t\t<div class=\"popup-header\">\r\n\t\t\t\t<span class=\"back iconfont icon-zuojiantou\" v-on:click=\"orderDetailPopup=false\"></span>订单详情\r\n\t\t\t</div>\r\n\t\t\t<!-- popup内容区 -->\r\n\t\t\t<div class=\"popup-main\" style=\"height: calc(100% - 40px);\">\r\n\t\t\t\t<div class=\"order-detail\">\r\n\t\t\t\t\t<div class=\"order-detail-top\" style=\"margin-bottom: -20px;\">\r\n\t\t\t\t\t\t<p v-on:click=\"openOrderTrack(orderDetailData.orderNo)\">订单跟踪 ></p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"order-detail-top\" v-if=\"orderDetailData.orderState==1\">\r\n\t\t\t\t\t\t<p>等待支付</p>\r\n\t\t\t\t\t\t<!-- <p>请在15分钟内完成支付，超时将自动取消。</p>\r\n\t\t\t\t\t\t<p>等待支付 <span class=\"time\">15:00</span></p> -->\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div class=\"big-btn-wrap\">\r\n\t\t\t\t\t\t\t<van-button type=\"default\" size=\"small\" v-on:click=\"cancalOrder(orderDetailData.orderNo)\">取消订单</van-button>\r\n\t\t\t\t\t\t\t<van-button type=\"default\" size=\"small\" color=\"#FFBD27\" style=\"margin-left: 20px;\" v-on:click=\"goPay(orderDetailData.orderNo,orderDetailData.sellerId,orderDetailData.totalAmount,true)\">立即支付</van-button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div class=\"my-order-list\" style=\"margin: 10px;border-radius: 6px;overflow: hidden;\">\r\n\t\t\t\t\t\t<div class=\"seller-info\">\r\n\t\t\t\t\t\t\t<img :src=\"orderDetailData.picUrl\" alt=\"\">\r\n\t\t\t\t\t\t\t<p class=\"seller-name\">{{orderDetailData.sellerWinName}}</p>\r\n\t\t\t\t\t\t\t<p>{{orderDetailData.sellerWinAddress}}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<li v-for=\"item in orderDetailData.orderGoodses\">\r\n\t\t\t\t\t\t\t\t<p class=\"my-order-name\"><img :src=\"item.gPic\" alt=\"\">{{item.gName}}*{{item.buyCounter}}</p>\r\n\t\t\t\t\t\t\t\t<p class=\"price\">￥{{item.totalPrice}}</p>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t<div class=\"send-wrap\">\r\n\t\t\t\t\t\t\t<p v-show=\"sendAddress.mealMode==2\"><span>配送费</span><span>￥{{orderDetailData.deliveryFee}}</span></p>\r\n\t\t\t\t\t\t\t<p><span>环保费</span><span>￥{{orderDetailData.totalGreenMoney}}</span></p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<p class=\"total-price\">小计<span>￥{{sendAddress.mealMode==2?orderDetailData.totalPrice:orderDetailData.totalPrice-orderDetailData.deliveryFee}}</span></p>\r\n\t\t\t\t\t\t<a :href=\"'tel:'+orderDetailData.sellerPhone\" class=\"seller-phone\"><i class=\"iconfont icon-dianhua\"></i>商家电话</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div style=\"margin: 10px;border-radius: 6px;overflow: hidden;\">\r\n\t\t\t\t\t\t<van-cell-group>\r\n\t\t\t\t\t\t  <van-cell title=\"订餐方式\" :value=\"sendAddress.mealMode==1?'自提':sendAddress.mealMode==2?'外送':'到店用餐'\" />\r\n\t\t\t\t\t\t  <van-cell title=\"期望送达时间\" :value=\"sendAddress.arrivalTime\" />\r\n\t\t\t\t\t\t  <van-cell :title=\"sendAddress.mealMode==1?'自提地址':sendAddress.mealMode==2?'配送地址':'用餐地址'\" :value=\"sendAddress.address\" />\r\n\t\t\t\t\t\t</van-cell-group>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style=\"margin: 10px;border-radius: 6px;overflow: hidden;\">\r\n\t\t\t\t\t\t<van-cell-group>\r\n\t\t\t\t\t\t  <van-cell value-class=\"cell-value\" title=\"订单号\" :value=\"orderDetailData.orderNo\" />\r\n\t\t\t\t\t\t  <van-cell title=\"订单提交日期\" :value=\"orderDetailData.createTime\" />\r\n\t\t\t\t\t\t  <van-cell title=\"备注\" :value=\"orderDetailData.remark\" />\r\n\t\t\t\t\t\t</van-cell-group>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</van-popup>\r\n\t\t\r\n\t\t<!-- 订单评价 -->\r\n\t\t<van-popup position=\"right\" :style=\"{width:'100%', height: '100%',background:'#eee'}\" v-model=\"assessPopup\">\r\n\t\t\t<!-- popup内头部 -->\r\n\t\t\t<div class=\"popup-header\">\r\n\t\t\t\t<span class=\"back iconfont icon-zuojiantou\" v-on:click=\"assessPopup=false\"></span>订单评价\r\n\t\t\t</div>\r\n\t\t\t<!-- popup内容区 -->\r\n\t\t\t<div class=\"popup-main\" style=\"height: calc(100% - 40px);\">\r\n\t\t\t\t<div class=\"assess-item\">\r\n\t\t\t\t\t<p class=\"head-img\"><img src=\"../../public/static/images/icon/default_head.png\">{{sendName}}</p>\r\n\t\t\t\t\t<div class=\"pleased-wrap\">\r\n\t\t\t\t\t\t<span :class=\"{'active':pleasedTab==1}\" v-on:click=\"pleasedTabClick(1)\"><i class=\"iconfont icon-manyi\"></i>满意</span>\r\n\t\t\t\t\t\t<span :class=\"{'active':pleasedTab==2}\" v-on:click=\"pleasedTabClick(2)\"><i class=\"iconfont icon-feichangbumanyi\"></i>不满意</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"assess-msg\">\r\n\t\t\t\t\t\t<span v-on:click=\"selectSendAssess($event)\" v-for=\"sendAssessItem in sendAssessArr\">{{sendAssessItem.commentWordText}}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"assess-item\">\r\n\t\t\t\t\t<p class=\"head-img\"><img :src=\"assessWinPic\">{{assessWinName}}</p>\r\n\t\t\t\t\t<div class=\"assess-star-wrap\">\r\n\t\t\t\t\t\t<div class=\"star-assess\" v-show=\"assessStarArr.length>0\">评价：<van-rate v-model=\"assessStar\" v-on:change=\"assessStarChange\" /><span class=\"assessText\">{{assessStarText}}</span></div>\r\n\t\t\t\t\t\t<div class=\"star-assess\" v-show=\"tasteStarArr.length>0\">口味：<van-rate v-model=\"tasteStar\" v-on:change=\"tasteStarChange\" /><span class=\"assessText\">{{tastStarText}}</span></div>\r\n\t\t\t\t\t\t<div class=\"star-assess\" v-show=\"packStarArr.length>0\">包装：<van-rate v-model=\"packStar\" v-on:change=\"packStarChange\" /><span class=\"assessText\">{{packStarText}}</span></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"assess-remark\">\r\n\t\t\t\t\t\t<van-field\r\n\t\t\t\t\t\t  v-model=\"assessRemark\"\r\n\t\t\t\t\t\t  rows=\"3\"\r\n\t\t\t\t\t\t  type=\"textarea\"\r\n\t\t\t\t\t\t  maxlength=\"100\"\r\n\t\t\t\t\t\t  placeholder=\"请输入留言\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"upload-img\">\r\n\t\t\t\t\t\t<van-uploader v-model=\"fileList\" multiple :max-count=\"4\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"assess-item\">\r\n\t\t\t\t\t<van-checkbox checked-color=\"#F4BE42\" v-model=\"nmChecked\" v-on:change=\"nmCheckedChange\">匿名评价</van-checkbox>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"big-btn-wrap\">\r\n\t\t\t\t\t<van-button block color=\"#F4BE42\" v-on:click=\"submitBtn\">提交</van-button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</van-popup>\r\n\t\t\r\n\t\t<!-- 订单跟踪 -->\r\n\t\t<van-popup :duration=\"0\" position=\"bottom\" :style=\"{width:'95%', height: '60%',background:'transparent',transform:'translateX(-50%)',marginLeft:'50%'}\" v-model=\"orderTrackPopup\">\r\n\t\t\t<div class=\"order-track-wrap\">\r\n\t\t\t\t<p class=\"order-track-tit\">订单跟踪</p>\r\n\t\t\t\t<div class=\"order-track-main\">\r\n\t\t\t\t\t<ul class=\"order-track-list\">\r\n\t\t\t\t\t\t<li v-for=\"item in orderTrackData\">\r\n\t\t\t\t\t\t\t<div class=\"order-track-item\">\r\n\t\t\t\t\t\t\t\t<span class=\"state\">{{item.stateName}}</span><span class=\"date\">{{item.createTime}}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"order-track-send-phone\">\r\n\t\t\t\t\t\t\t\t<span>{{item.deliveryPersonName}}</span>\r\n\t\t\t\t\t\t\t\t<a :href=\"'tel:'+item.deliveryPersonPhone\">{{item.deliveryPersonPhone}}</a>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<p class=\"order-track-cancel\" v-on:click=\"orderTrackPopup=false\">关闭</p>\r\n\t\t</van-popup>\r\n\t</div>\r\n\r\n</template>\r\n\r\n<script type=\"text/javascript\">\r\n\tvar userId='';//用户id\r\n\tvar pageNum=1;//页码\r\n\texport default{\r\n\t\tdata:function(){\r\n\t\t\treturn{\r\n\t\t\t\ttitle:'订单',\r\n\t\t\t\torderList:[],//订单列表\r\n\t\t\t\tdefaultImg:'./static/images/icon/default1.png',//默认图片\r\n\t\t\t\torderDetailPopup:false,//订单详情\r\n\t\t\t\torderDetailData:'',//订单详情\r\n\t\t\t\tsendAddress:'',//配送地址详情\r\n\t\t\t\trefreshLoading: false,//下拉刷新\r\n\t\t\t\tassessPopup:false,//订单评价\r\n\t\t\t\tsendChecked:false,//配送员匿名\r\n\t\t\t\tpleasedTab:0,//满意、不满意切换\r\n\t\t\t\tpleasedType:'',//配送员评价类型（满意、不满意）\r\n\t\t\t\tassessMsg:[],//选择的满意用语\r\n\t\t\t\tassessRemark:'',//留言\r\n\t\t\t\tnmChecked:false,//匿名评价\r\n\t\t\t\tsendPleasedMsg:[],//配送员满意用语\r\n\t\t\t\tsendDispleasedMsg:[],//配送员不满意用语\r\n\t\t\t\tfileList:[],//上传图片\r\n\t\t\t\tsendAssessArr:[],//配送员评价用语\r\n\t\t\t\tassessWinPic:'',//评价里当前窗口图片\r\n\t\t\t\tassessWinName:'',//评价里当前窗口名\r\n\t\t\t\tsendName:'',//评价里配送员\r\n\t\t\t\tsendPersonId:'',//配送员id\r\n\t\t\t\tuserId:'',//用户id\r\n\t\t\t\tsellerId:'',//商家id\r\n\t\t\t\torderNo:'',//订单号\r\n\t\t\t\tassessStar:0,//评价星级\r\n\t\t\t\ttasteStar:0,//口味星级\r\n\t\t\t\tpackStar:0,//包装星级\r\n\t\t\t\tassessStarArr:[],//评价用语\r\n\t\t\t\ttasteStarArr:[],//口味用语\r\n\t\t\t\tpackStarArr:[],//包装用语\r\n\t\t\t\tassessStarText:'',//评价星级提示用语\r\n\t\t\t\ttastStarText:'',//口味星级提示用语\r\n\t\t\t\tpackStarText:'',//包装星级提示用语\r\n\t\t\t\torderTrackPopup:false,//订单跟踪\r\n\t\t\t\torderTrackData:[],//订单跟踪\r\n\t\t\t\torderStatus:'',//支付时查询的订单状态\r\n\t\t\t\t// orderWay:'',//订单方式1：自提2：外送，3：到店用餐\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomponents:{\r\n\t\t\t\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t // 滚动到底加载更多\r\n\t\t\twindow.addEventListener('scroll',this.reachBottom)\t\t\t  \r\n\t\t},\r\n\t\t// 销毁监听滚动条事件\r\n\t\tdestroyed(){\r\n\t\t    window.removeEventListener('scroll', this.reachBottom)\r\n\t\t\tconsole.log('销毁')\r\n\t\t  },\r\n\t\t　　\r\n\t\tmethods:{\r\n\t\t\t// 获取订单详情\r\n\t\t\tgetOrderDetail(orderNo){\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\t_this.$axios({\r\n\t\t\t\t  method: 'get',\r\n\t\t\t\t  url: port+'/v1/order/get',\r\n\t\t\t\t  headers:{'token':localStorage.getItem('token')},\r\n\t\t\t\t  params: {\r\n\t\t\t\t    orderNo:orderNo\r\n\t\t\t\t  }\r\n\t\t\t\t}).then(function(data){\r\n\t\t\t\t\tconsole.log('订单详情',data)\r\n\t\t\t\t\tif (data.data.status==200) {\r\n\t\t\t\t\t\t_this.orderStatus=data.data.data.orderState//只有orderState为1时订单状态为用户已提交订单，才可以付款\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(data.data.status==600){\r\n\t\t\t\t\t\t_this.$toast(data.data.msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(data.data.status==601||data.data.status==602||data.data.status==603){\r\n\t\t\t\t\t\t_this.$toast('登录过期，请登录');\r\n\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t_this.$router.push({'path':'/login'})\r\n\t\t\t\t\t\t},2000)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(function(error){\r\n\t\t\t\t\t_this.$toast('操作失败');\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 打开订单跟踪\r\n\t\t\topenOrderTrack(orderNo){\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\t_this.orderTrackPopup=true;\r\n\t\t\t\tconsole.log(orderNo)\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t_this.$axios({\r\n\t\t\t\t  method: 'get',\r\n\t\t\t\t  url: port+'/v1/order/getStateInfo',\r\n\t\t\t\t  headers:{'token':localStorage.getItem('token')},\r\n\t\t\t\t  params: {\r\n\t\t\t\t    orderNo:orderNo\r\n\t\t\t\t  }\r\n\t\t\t\t}).then(function(data){\r\n\t\t\t\t\tconsole.log('订单跟踪',data)\r\n\t\t\t\t\tif (data.data.status==200) {\r\n\t\t\t\t\t\t_this.orderTrackData=data.data.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(data.data.status==600){\r\n\t\t\t\t\t\t_this.$toast(data.data.msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(data.data.status==601||data.data.status==602||data.data.status==603){\r\n\t\t\t\t\t\t_this.$toast('登录过期，请登录');\r\n\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t_this.$router.push({'path':'/login'})\r\n\t\t\t\t\t\t},2000)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(function(error){\r\n\t\t\t\t\t_this.$toast('操作失败');\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 评价星级点击事件\r\n\t\t\tassessStarChange(e){\r\n\t\t\t\tif(this.assessStarArr[e-1]){\r\n\t\t\t\t\tthis.assessStarText=this.assessStarArr[e-1].commentItemContent\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.assessStarText='';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 口味星级点击事件\r\n\t\t\ttasteStarChange(e){\r\n\t\t\t\tif(this.tasteStarArr[e-1]){\r\n\t\t\t\t\tthis.tastStarText=this.tasteStarArr[e-1].commentItemContent\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.tastStarText='';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 包装星级点击事件\r\n\t\t\tpackStarChange(e){\r\n\t\t\t\tif(this.packStarArr[e-1]){\r\n\t\t\t\t\tthis.packStarText=this.packStarArr[e-1].commentItemContent\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.packStarText='';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 匿名评价change\r\n\t\t\tnmCheckedChange(e){\r\n\t\t\t\tif(e){\r\n\t\t\t\t\tuserId='';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuserId=this.userId;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(userId)\r\n\t\t\t},\r\n\t\t\t// 满意不满意切换\r\n\t\t\tpleasedTabClick(e){\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\t_this.pleasedTab=e;\r\n\t\t\t\tif(_this.pleasedTab==1){\r\n\t\t\t\t\t_this.pleasedType='满意';\r\n\t\t\t\t}\r\n\t\t\t\tif(_this.pleasedTab==2){\r\n\t\t\t\t\t_this.pleasedType='不满意';\r\n\t\t\t\t}\r\n\t\t\t\t_this.getSendAssess(e);\r\n\t\t\t\tvar assessItem=document.querySelectorAll('.assess-msg span');\r\n\t\t\t\tfor (var i=0;i<assessItem.length;i++) {\r\n\t\t\t\t\tassessItem[i].className='';\r\n\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t// 滚动到底加载更多\r\n\t\t\treachBottom(){\r\n\t\t\t\t  //变量scrollTop是滚动条滚动时，距离顶部的距离\r\n\t\t\t\t  let scrollTop = document.documentElement.scrollTop||document.body.scrollTop;\r\n\t\t\t\t  //变量windowHeight是可视区的高度\r\n\t\t\t\t  let windowHeight = document.documentElement.clientHeight || document.body.clientHeight;\r\n\t\t\t\t  //变量scrollHeight是滚动条的总高度\r\n\t\t\t\t  let scrollHeight = document.documentElement.scrollHeight||document.body.scrollHeight;\r\n\t\t\t\t\t//滚动条到底部的条件\r\n\t\t\t\t\tif(scrollTop+windowHeight >= scrollHeight){\r\n\t\t\t\t\t\tpageNum++;\r\n\t\t\t\t\t\tthis.getOrder(pageNum)\r\n\t\t\t\t\t\tconsole.log('到底了',pageNum)\r\n\t\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 点击立即评价\r\n\t\t\topenAssessPopup(orderNo,winPic,winName){\r\n\t\t\t\tconsole.log(orderNo,winPic,winName)\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t_this.assessPopup=true;\r\n\t\t\t\t_this.getSellerAssessMsg();//商家星级评价\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t// 设置评价里窗口图片和窗口名\r\n\t\t\t\t_this.assessWinPic=winPic?winPic:'./static/images/icon/default1.png';\r\n\t\t\t\t_this.assessWinName=winName;\r\n\t\t\t\t\r\n\t\t\t\t_this.$axios({\r\n\t\t\t\t\t  method: 'get',\r\n\t\t\t\t\t  url: port+'/v1/order/get',\r\n\t\t\t\t\t  headers:{'token':localStorage.getItem('token')},\r\n\t\t\t\t\t  params: {\r\n\t\t\t\t\t\torderNo:orderNo\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}).then(function(data){\r\n\t\t\t\t\t\tconsole.log('评价-订单详情',data)\r\n\t\t\t\t\t\tif (data.data.status==200) {\r\n\t\t\t\t\t\t\t_this.sendName=data.data.data.deliveryPersonName;//配送员姓名\r\n\t\t\t\t\t\t\t_this.sendPersonId=data.data.data.deliveryPersonId;//配送员id\r\n\t\t\t\t\t\t\t_this.userId=data.data.data.personId;//用户id\r\n\t\t\t\t\t\t\tuserId=data.data.data.personId;\r\n\t\t\t\t\t\t\t_this.sellerId=data.data.data.sellerId;//商家id\r\n\t\t\t\t\t\t\t_this.orderNo=data.data.data.orderNo;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(data.data.status==600){\r\n\t\t\t\t\t\t\t_this.$toast(data.data.msg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(data.data.status==601||data.data.status==602||data.data.status==603){\r\n\t\t\t\t\t\t\t_this.$toast('请先登录');\r\n\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\t_this.$router.push({'path':'/login'})\r\n\t\t\t\t\t\t\t},2000)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(function(error){\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 点击配送员评价用语\r\n\t\t\tselectSendAssess(e){\r\n\t\t\t\tif(e.target.className==''){\r\n\t\t\t\t\te.target.className='active'\r\n\t\t\t\t}else{\r\n\t\t\t\t\te.target.className=''\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t// 获取配送员评价用语\r\n\t\t\tgetSendAssess(type){\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\t_this.$axios({\r\n\t\t\t\t\t  method: 'get',\r\n\t\t\t\t\t  url: port+'/v1/order/getCommentWord',\r\n\t\t\t\t\t  headers:{'token':localStorage.getItem('token')},\r\n\t\t\t\t\t  params: {\r\n\t\t\t\t\t\tcId:JSON.parse(localStorage.getItem('userInfo')).cId,\r\n\t\t\t\t\t\tcommentTypeId:type//用语类型（0全部，1满意，2不满意）\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}).then(function(data){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (data.data.status==200) {\r\n\t\t\t\t\t\t\t_this.sendAssessArr=[];\r\n\t\t\t\t\t\t\t_this.sendAssessArr=data.data.data\r\n\t\t\t\t\t\t\tconsole.log('配送员评价用语',_this.sendAssessArr)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(data.data.status==600){\r\n\t\t\t\t\t\t\t_this.$toast(data.data.msg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(data.data.status==601||data.data.status==602||data.data.status==603){\r\n\t\t\t\t\t\t\t_this.$toast('请先登录');\r\n\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\t_this.$router.push({'path':'/login'})\r\n\t\t\t\t\t\t\t},2000)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(function(error){\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 获商家评价\r\n\t\t\tgetSellerAssessMsg(){\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\t_this.$axios({\r\n\t\t\t\t\t  method: 'get',\r\n\t\t\t\t\t  url: port+'/v1/order/getCommentItem',\r\n\t\t\t\t\t  headers:{'token':localStorage.getItem('token')},\r\n\t\t\t\t\t  params: {\r\n\t\t\t\t\t\tcId:JSON.parse(localStorage.getItem('userInfo')).cId,\r\n\t\t\t\t\t\tcommentTypeId:0\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}).then(function(data){\r\n\t\t\t\t\t\tconsole.log('商家评价用语',data)\r\n\t\t\t\t\t\tif (data.data.status==200) {\r\n\t\t\t\t\t\t\t// 评价、口味、包装定义变量，下面排序赋值用\r\n\t\t\t\t\t\t\tvar assessStarArr=[];\r\n\t\t\t\t\t\t\tvar tasteStarArr=[];\r\n\t\t\t\t\t\t\tvar packStarArr=[];\r\n\t\t\t\t\t\t\t// 评价、口味、包装先清空\r\n\t\t\t\t\t\t\t_this.assessStarArr=[];\r\n\t\t\t\t\t\t\t_this.tasteStarArr=[];\r\n\t\t\t\t\t\t\t_this.packStarArr=[];\r\n\t\t\t\t\t\t\tif(data.data.data.length>0){\r\n\t\t\t\t\t\t\t\tfor (var i=0;i<data.data.data.length;i++) {\r\n\t\t\t\t\t\t\t\t\t// 评价用语单独抽离\r\n\t\t\t\t\t\t\t\t\tif(data.data.data[i].commentTypeId==1){\r\n\t\t\t\t\t\t\t\t\t\tassessStarArr.push({commentItemScore:data.data.data[i].commentItemScore,commentItemContent:data.data.data[i].commentItemContent})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t// 口味用语抽离\r\n\t\t\t\t\t\t\t\t\tif(data.data.data[i].commentTypeId==2){\r\n\t\t\t\t\t\t\t\t\t\ttasteStarArr.push({commentItemScore:data.data.data[i].commentItemScore,commentItemContent:data.data.data[i].commentItemContent})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t// 包装用语抽离\r\n\t\t\t\t\t\t\t\t\tif(data.data.data[i].commentTypeId==3){\r\n\t\t\t\t\t\t\t\t\t\tpackStarArr.push({commentItemScore:data.data.data[i].commentItemScore,commentItemContent:data.data.data[i].commentItemContent})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// 对评价根据分数排序\r\n\t\t\t\t\t\t\t\t_this.assessStarArr=assessStarArr.sort(function(a,b){\r\n\t\t\t\t\t\t\t\t\treturn a.commentItemScore-b.commentItemScore\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t// 对口味评价根据分数排序\r\n\t\t\t\t\t\t\t\t_this.tasteStarArr=tasteStarArr.sort(function(a,b){\r\n\t\t\t\t\t\t\t\t\treturn a.commentItemScore-b.commentItemScore\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t// 对包装评价根据分数排序\r\n\t\t\t\t\t\t\t\t_this.packStarArr=packStarArr.sort(function(a,b){\r\n\t\t\t\t\t\t\t\t\treturn a.commentItemScore-b.commentItemScore\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tconsole.log('评价：',_this.assessStarArr,'口味：',_this.tasteStarArr,'包装',_this.packStarArr)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log('满意：',_this.sendPleasedMsg,'不满意：',_this.sendDispleasedMsg)\r\n\t\t\t\t\t\tif(data.data.status==600){\r\n\t\t\t\t\t\t\t_this.$toast(data.data.msg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(data.data.status==601||data.data.status==602||data.data.status==603){\r\n\t\t\t\t\t\t\t_this.$toast('请先登录');\r\n\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\t_this.$router.push({'path':'/login'})\r\n\t\t\t\t\t\t\t},2000)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(function(error){\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 提交评价\r\n\t\t\tsubmitBtn(){\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\tvar starAssess=[];//星级评价\r\n\t\t\t\t// 如果有评价项\r\n\t\t\t\tif(_this.assessStarArr.length>0){\r\n\t\t\t\t\tstarAssess.push({commentTipContent:_this.assessStarText,commentTypeId:\"1\",commentTypeName:\"评价\",pId:JSON.parse(localStorage.getItem(\"userInfo\")).pId,score:_this.assessStar,sellerId:_this.sellerId,orderNo:_this.orderNo})\r\n\t\t\t\t}\r\n\t\t\t\t// 如果有口味评价项\r\n\t\t\t\tif(_this.tasteStarArr.length>0){\r\n\t\t\t\t\tstarAssess.push({commentTipContent:_this.tastStarText,commentTypeId:\"2\",commentTypeName:\"口味\",pId:JSON.parse(localStorage.getItem(\"userInfo\")).pId,score:_this.tasteStar,sellerId:_this.sellerId,orderNo:_this.orderNo})\r\n\t\t\t\t}\r\n\t\t\t\t// 如果有包装评价项\r\n\t\t\t\tif(_this.packStarArr.length>0){\r\n\t\t\t\t\tstarAssess.push({commentTipContent:_this.packStarText,commentTypeId:\"3\",commentTypeName:\"包装\",pId:JSON.parse(localStorage.getItem(\"userInfo\")).pId,score:_this.packStar,sellerId:_this.sellerId,orderNo:_this.orderNo})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconsole.log('星级提交',starAssess)\r\n\t\t\t\tvar formData=new FormData();\r\n\t\t\t\tvar sendAssessMsg=[];//配送员评价用语\r\n\t\t\t\tvar imgArr=[];//上传图片\r\n\t\t\t\tfor (var i=0;i<this.fileList.length;i++) {\r\n\t\t\t\t\timgArr.push(this.fileList[i].file)\r\n\t\t\t\t\tformData.append('files',this.fileList[i].file)\r\n\t\t\t\t}\r\n\t\t\t\t// console.log('上传图片',imgArr)\r\n\t\t\t\t\r\n\t\t\t\t// 获取选中的配送员评价用语\r\n\t\t\t\tvar assessItem=document.querySelectorAll('.assess-msg span');\r\n\t\t\t\tfor (var i=0;i<assessItem.length;i++) {\r\n\t\t\t\t\tif(assessItem[i].className=='active'){\r\n\t\t\t\t\t\tsendAssessMsg.push(assessItem[i].innerHTML)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(sendAssessMsg.length==0&&imgArr.length==0&&_this.assessRemark==\"\"){\r\n\t\t\t\t\tconsole.log('到这了');\r\n\t\t\t\t\t_this.$toast('您已放弃评价')\r\n\t\t\t\t\t_this.assessPopup=false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tvar load=_this.$toast.loading({\r\n\t\t\t\t  message: '提交中...',\r\n\t\t\t\t  duration:0,\r\n\t\t\t\t  forbidClick: true,\r\n\t\t\t\t});\r\n\t\t\t\t_this.$axios({\r\n\t\t\t\t\t  method: 'post',\r\n\t\t\t\t\t  url: port+'/v1/order/comment',\r\n\t\t\t\t\t  headers:{'token':localStorage.getItem('token')},//\r\n\t\t\t\t\t  data:formData,//文件\r\n\t\t\t\t\t  params: {\r\n\t\t\t\t\t\t  orderNo:_this.orderNo,\r\n\t\t\t\t\t\t  deliveryPersonId:_this.sendPersonId,//配送员id\r\n\t\t\t\t\t\t  commentWordTypeId:_this.pleasedTab,//评语所属类型id（满意1，不满意2）\r\n\t\t\t\t\t\t  commentWordTypeName:_this.pleasedType,//评语所属类型名称（满意，不满意）\r\n\t\t\t\t\t\t  commentWords:sendAssessMsg.toString(),//评语，格式:词语,词语\r\n\t\t\t\t\t\t  pId:userId,//用户id\r\n\t\t\t\t\t\t  sellerId:_this.sellerId,//商家id\r\n\t\t\t\t\t\t  commentContent:_this.assessRemark,//评论内容\r\n\t\t\t\t\t\t  sellerItemComments:JSON.stringify(starAssess).substring(1,JSON.stringify(starAssess).length-1),//商家星级评论项，去掉前后中括号\r\n\t\t\t\t\t\t  goodsComments:'',\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}).then(function(data){\r\n\t\t\t\t\t\tconsole.log('提交评价',data)\r\n\t\t\t\t\t\tload.clear();\r\n\t\t\t\t\t\tif (data.data.status==200) {\r\n\t\t\t\t\t\t\t_this.$toast('已评价');\r\n\t\t\t\t\t\t\tpageNum=1;\r\n\t\t\t\t\t\t\t_this.orderList=[];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t_this.assessPopup=false;\r\n\t\t\t\t\t\t\t_this.getOrder(pageNum);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\tlocation.reload()\r\n\t\t\t\t\t\t\t},1000)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(data.data.status==600){\r\n\t\t\t\t\t\t\t_this.$toast(data.data.msg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(data.data.status==601||data.data.status==602||data.data.status==603){\r\n\t\t\t\t\t\t\t_this.$toast('登录过期，请登录');\r\n\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\t_this.$router.push({'path':'/login'})\r\n\t\t\t\t\t\t\t},2000)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(function(error){\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t// 下拉刷新\r\n\t\t\t onRefresh() {\r\n\t\t\t       pageNum=1;\r\n\t\t\t       this.orderList=[];\r\n\t\t\t       this.getOrder(pageNum);\r\n\t\t\t\t   this.refreshLoading = false;\r\n\t\t\t\t  \r\n\t\t\t    },\r\n\t\t\t// 确定送达\r\n\t\t\tconfirmService(orderNo){\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\tvar load=_this.$toast.loading({\r\n\t\t\t\t  message: '提交中...',\r\n\t\t\t\t  duration:0,\r\n\t\t\t\t  forbidClick: true,\r\n\t\t\t\t});\r\n\t\t\t\t_this.$axios({\r\n\t\t\t\t\t  method: 'post',\r\n\t\t\t\t\t  url: port+'/v1/order/arrive',\r\n\t\t\t\t\t  headers:{'token':localStorage.getItem('token')},\r\n\t\t\t\t\t  params: {\r\n\t\t\t\t\t\torderNo:orderNo,\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}).then(function(data){\r\n\t\t\t\t\t\tconsole.log('确定送达',data)\r\n\t\t\t\t\t\tload.clear();\r\n\t\t\t\t\t\tif (data.data.status==200) {\r\n\t\t\t\t\t\t\t_this.$toast('已确认送达');\r\n\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\tpageNum=1;\r\n\t\t\t\t\t\t\t\t_this.orderList=[];\r\n\t\t\t\t\t\t\t\t_this.getOrder(pageNum);\r\n\t\t\t\t\t\t\t},1000)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(data.data.status==600){\r\n\t\t\t\t\t\t\t_this.$toast(data.data.msg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(data.data.status==601||data.data.status==602||data.data.status==603){\r\n\t\t\t\t\t\t\t_this.$toast('登录过期，请登录');\r\n\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\t_this.$router.push({'path':'/login'})\r\n\t\t\t\t\t\t\t},2000)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(function(error){\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t_this.$toast('操作失败');\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 查询地址详情\r\n\t\t\tgetAddress(orderNo){\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\t_this.$axios({\r\n\t\t\t\t  method: 'get',\r\n\t\t\t\t  url: port+'/v1/order/getOrderAddress',\r\n\t\t\t\t  headers:{'token':localStorage.getItem('token')},\r\n\t\t\t\t  params: {\r\n\t\t\t\t    orderNo:orderNo,\r\n\t\t\t\t  }\r\n\t\t\t\t}).then(function(data){\r\n\t\t\t\t\tif (data.data.status==200) {\r\n\t\t\t\t\t\t_this.sendAddress=data.data.data;\r\n\t\t\t\t\t\tconsole.log('订单配送地址详情',_this.sendAddress)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(data.data.status==600){\r\n\t\t\t\t\t\t_this.$toast(data.data.msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(data.data.status==601||data.data.status==602||data.data.status==603){\r\n\t\t\t\t\t\t_this.$toast('登录过期，请登录');\r\n\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t_this.$router.push({'path':'/login'})\r\n\t\t\t\t\t\t},2000)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(function(error){\r\n\t\t\t\t\t_this.$toast('操作失败');\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 催单\r\n\t\t\tcuiDan(orderNo){\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\tvar load=_this.$toast.loading({\r\n\t\t\t\t  message: '提交中...',\r\n\t\t\t\t  duration:0,\r\n\t\t\t\t  forbidClick: true,\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t_this.$axios({\r\n\t\t\t\t  method: 'post',\r\n\t\t\t\t  url: port+'/v1/order/remind',\r\n\t\t\t\t  headers:{'token':localStorage.getItem('token')},\r\n\t\t\t\t  params: {\r\n\t\t\t\t    orderNo:orderNo,\r\n\t\t\t\t\ttradeNo:'1'\r\n\t\t\t\t  }\r\n\t\t\t\t}).then(function(data){\r\n\t\t\t\t\tconsole.log('催单',data)\r\n\t\t\t\t\tload.clear();//关闭加载\r\n\t\t\t\t\tif (data.data.status==200) {\r\n\t\t\t\t\t\t_this.$toast('已催单');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(data.data.status==600){\r\n\t\t\t\t\t\t_this.$toast(data.data.msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(data.data.status==601||data.data.status==602||data.data.status==603){\r\n\t\t\t\t\t\t_this.$toast('登录过期，请登录');\r\n\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t_this.$router.push({'path':'/login'})\r\n\t\t\t\t\t\t},2000)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(function(error){\r\n\t\t\t\t\t_this.$toast('操作失败');\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 立即支付\r\n\t\t\tgoPay(orderNo,sellerId,totalAmount,isPopupPay){\r\n\t\t\t\t\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\t_this.getOrderDetail(orderNo)\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t_this.$dialog.confirm({\r\n\t\t\t\t  title: '温馨提示',\r\n\t\t\t\t  message: '确定支付？',\r\n\t\t\t\t})\r\n\t\t\t\t  .then(() => {\r\n\t\t\t\t\t  \r\n\t\t\t\t\t  if(_this.orderStatus!=1){\r\n\t\t\t\t\t\t  _this.$toast('订单超时已取消！');\r\n\t\t\t\t\t\t  setTimeout(()=>{\r\n\t\t\t\t\t\t\t  // 如果是在订单详情里点击的立即支付，则关闭当前详情\r\n\t\t\t\t\t\t\t  if(isPopupPay){\r\n\t\t\t\t\t\t\t\t  _this.orderDetailPopup=false;\r\n\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t  pageNum=1;\r\n\t\t\t\t\t\t\t  _this.orderList=[];\r\n\t\t\t\t\t\t  \t_this.getOrder(pageNum);\r\n\t\t\t\t\t\t  },1000)\r\n\t\t\t\t\t\t  return;\r\n\t\t\t\t\t  }\r\n\t\t\t\t    var load=_this.$toast.loading({\r\n\t\t\t\t      message: '正在提交...',\r\n\t\t\t\t      duration:0,\r\n\t\t\t\t      forbidClick: true,\r\n\t\t\t\t    });\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 真实支付\r\n\t\t\t\t\t// _this.$axios({\r\n\t\t\t\t\t//   method: 'get',\r\n\t\t\t\t\t//   url:JSON.parse(localStorage.getItem('userInfo')).wxPayUrl,\r\n\t\t\t\t\t//   params: {\r\n\t\t\t\t\t// \ttotalFee:totalAmount*100,//金额（分）\r\n\t\t\t\t\t// \tbody:'请支付',//标题\r\n\t\t\t\t\t// \toutTradeNo:orderNo,//订单编号\r\n\t\t\t\t\t// \tattach:sellerId,//商家id\r\n\t\t\t\t\t// \tnotifyUrl:port+'/v1/order/wechatPayNotify'\r\n\t\t\t\t\t//   }\r\n\t\t\t\t\t// }).then(function(data){\r\n\t\t\t\t\t// \tconsole.log('支付',data)\r\n\t\t\t\t\t// \tload.clear();\r\n\t\t\t\t\t// \tvar payUrl=data.data.data.payUrl+\"&redirect_url=\"+payBackUrl+\"/#/index\";\r\n\t\t\t\t\t// \t_this.$router.push({'path':'/pay',query:{'payUrl':payUrl}});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t// }).catch(function(error){\r\n\t\t\t\t\t// \tconsole.log(error);\r\n\t\t\t\t\t// });\r\n\t\t\t\t    \r\n\t\t\t\t\t\r\n\t\t\t\t\t// 模拟支付\r\n\t\t\t\t    _this.$axios({\r\n\t\t\t\t      method: 'post',\r\n\t\t\t\t      url: port+'/v1/order/pay',\r\n\t\t\t\t      headers:{'token':localStorage.getItem('token')},\r\n\t\t\t\t      params: {\r\n\t\t\t\t        orderNo:orderNo,\r\n\t\t\t\t\t\ttradeNo:'1',\r\n\t\t\t\t\t\tsellerId:sellerId\r\n\t\t\t\t      }\r\n\t\t\t\t    }).then(function(data){\r\n\t\t\t\t\t\tconsole.log('立即支付',data)\r\n\t\t\t\t\t\t\r\n\t\t\t\t    \tload.clear();//关闭加载\r\n\t\t\t\t    \tif (data.data.status==200) {\r\n\t\t\t\t\t\t\tpageNum=1;\r\n\t\t\t\t\t\t\t_this.orderList=[];\r\n\t\t\t\t    \t\t_this.getOrder(pageNum);\r\n\t\t\t\t\t\t\t_this.orderDetailPopup=false;\r\n\t\t\t\t\t\t\t_this.$toast('支付成功');\r\n\t\t\t\t    \t}\r\n\t\t\t\t    \tif(data.data.status==600){\r\n\t\t\t\t    \t\t_this.$toast(data.data.msg);\r\n\t\t\t\t    \t}\r\n\t\t\t\t    \tif(data.data.status==601||data.data.status==602||data.data.status==603){\r\n\t\t\t\t    \t\t_this.$toast('登录过期，请重新登录');\r\n\t\t\t\t    \t\tsetTimeout(()=>{\r\n\t\t\t\t    \t\t\t_this.$router.push({'path':'/login'})\r\n\t\t\t\t    \t\t},2000)\r\n\t\t\t\t    \t}\r\n\t\t\t\t    }).catch(function(error){\r\n\t\t\t\t    \t_this.$toast('操作失败');\r\n\t\t\t\t    \tconsole.log(error);\r\n\t\t\t\t    });\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t  })\r\n\t\t\t\t  .catch(() => {\r\n\t\t\t\t    // on cancel\r\n\t\t\t\t  });\r\n\t\t\t},\r\n\t\t\t// 取消订单\r\n\t\t\tcancalOrder(orderNo){\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\tconsole.log(orderNo)\r\n\t\t\t\t_this.$dialog.confirm({\r\n\t\t\t\t  title: '温馨提示',\r\n\t\t\t\t  message: '确定取消订单？',\r\n\t\t\t\t})\r\n\t\t\t\t  .then(() => {\r\n\t\t\t\t    var load=_this.$toast.loading({\r\n\t\t\t\t      message: '提交中...',\r\n\t\t\t\t      duration:0,\r\n\t\t\t\t      forbidClick: true,\r\n\t\t\t\t    });\r\n\t\t\t\t    \r\n\t\t\t\t    _this.$axios({\r\n\t\t\t\t      method: 'post',\r\n\t\t\t\t      url: port+'/v1/order/updateState',\r\n\t\t\t\t      headers:{'token':localStorage.getItem('token')},\r\n\t\t\t\t      params: {\r\n\t\t\t\t        orderNo:orderNo\r\n\t\t\t\t      }\r\n\t\t\t\t    }).then(function(data){\r\n\t\t\t\t\t\tconsole.log('取消订单',data)\r\n\t\t\t\t    \tload.clear();//关闭加载\r\n\t\t\t\t    \tif (data.data.status==200) {\r\n\t\t\t\t\t\t\tpageNum=1;\r\n\t\t\t\t\t\t\t_this.orderList=[];\r\n\t\t\t\t    \t\t_this.getOrder(pageNum);\r\n\t\t\t\t\t\t\t_this.orderDetailPopup=false;\r\n\t\t\t\t\t\t\t_this.$toast('已取消');\r\n\t\t\t\t    \t}\r\n\t\t\t\t    \tif(data.data.status==600){\r\n\t\t\t\t    \t\t_this.$toast(data.data.msg);\r\n\t\t\t\t    \t}\r\n\t\t\t\t    \tif(data.data.status==601||data.data.status==602||data.data.status==603){\r\n\t\t\t\t    \t\t_this.$toast('登录过期，请登录');\r\n\t\t\t\t    \t\tsetTimeout(()=>{\r\n\t\t\t\t    \t\t\t_this.$router.push({'path':'/login'})\r\n\t\t\t\t    \t\t},2000)\r\n\t\t\t\t    \t}\r\n\t\t\t\t    }).catch(function(error){\r\n\t\t\t\t    \t_this.$toast('操作失败');\r\n\t\t\t\t    \tconsole.log(error);\r\n\t\t\t\t    });\r\n\t\t\t\t  })\r\n\t\t\t\t  .catch(() => {\r\n\t\t\t\t    // on cancel\r\n\t\t\t\t  });\r\n\t\t\t},\r\n\t\t\t// 订单详情\r\n\t\t\topenOrderDetail(orderNo){\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\t_this.orderDetailPopup=true\r\n\t\t\t\t\r\n\t\t\t\t_this.getAddress(orderNo);\r\n\t\t\t\t\r\n\t\t\t\tvar load=_this.$toast.loading({\r\n\t\t\t\t  message: '加载中...',\r\n\t\t\t\t  duration:0,\r\n\t\t\t\t  forbidClick: true,\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t_this.$axios({\r\n\t\t\t\t  method: 'get',\r\n\t\t\t\t  url: port+'/v1/order/get',\r\n\t\t\t\t  headers:{'token':localStorage.getItem('token')},\r\n\t\t\t\t  params: {\r\n\t\t\t\t    orderNo:orderNo\r\n\t\t\t\t  }\r\n\t\t\t\t}).then(function(data){\r\n\t\t\t\t\tload.clear();//关闭加载\r\n\t\t\t\t\tif (data.data.status==200) {\r\n\t\t\t\t\t\t_this.orderDetailData=data.data.data\r\n\t\t\t\t\t\tconsole.log('订单详情',_this.orderDetailData)\r\n\t\t\t\t\t\t_this.orderDetailData.picUrl=sellerPort+_this.orderDetailData.picUrl\r\n\t\t\t\t\t\tvar totalPrice=0;\r\n\t\t\t\t\t\t// 计算所有菜品的环保费\r\n\t\t\t\t\t\tvar greenMoney=0;\r\n\t\t\t\t\t\tfor (var i=0;i<_this.orderDetailData.orderGoodses.length;i++) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// 计算每个菜品的总价\r\n\t\t\t\t\t\t\t_this.orderDetailData.orderGoodses[i].totalPrice=_this.orderDetailData.orderGoodses[i].buyCounter*_this.orderDetailData.orderGoodses[i].gPrice;\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tgreenMoney+=_this.orderDetailData.orderGoodses[i].buyCounter*_this.orderDetailData.orderGoodses[i].gGreenFee;\r\n\t\t\t\t\t\t\t_this.orderDetailData.totalGreenMoney=greenMoney;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// 计算总价\r\n\t\t\t\t\t\t\ttotalPrice+=_this.orderDetailData.orderGoodses[i].totalPrice;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t_this.orderDetailData.totalPrice=totalPrice+greenMoney+_this.orderDetailData.deliveryFee;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(data.data.status==600){\r\n\t\t\t\t\t\t_this.$toast(data.data.msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(data.data.status==601||data.data.status==602||data.data.status==603){\r\n\t\t\t\t\t\t_this.$toast('登录过期，请登录');\r\n\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t_this.$router.push({'path':'/login'})\r\n\t\t\t\t\t\t},2000)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(function(error){\r\n\t\t\t\t\t_this.$toast('操作失败');\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t// 查询订单列表\r\n\t\t\tgetOrder(pageNum){\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\tvar load=_this.$toast.loading({\r\n\t\t\t\t  message: '加载中...',\r\n\t\t\t\t  duration:0,\r\n\t\t\t\t  forbidClick: true,\r\n\t\t\t\t});\r\n\t\t\t\t_this.$axios({\r\n\t\t\t\t  method: 'get',\r\n\t\t\t\t  url: port+'/v1/order/query',\r\n\t\t\t\t  headers:{'token':localStorage.getItem('token')},\r\n\t\t\t\t  params: {\r\n\t\t\t\t    personId:JSON.parse(localStorage.getItem('userInfo')).pId,\r\n\t\t\t\t\tpageNum:pageNum,\r\n\t\t\t\t\tpageSize:10\r\n\t\t\t\t  }\r\n\t\t\t\t}).then(function(data){\r\n\t\t\t\t\tload.clear();//关闭加载\r\n\t\t\t\t\tif (data.data.status==200) {\r\n\t\t\t\t\t\tif (data.data.data.list.length>0) {\r\n\t\t\t\t\t\t\tfor (var i=0;i<data.data.data.list.length;i++) {\r\n\t\t\t\t\t\t\t\tdata.data.data.list[i].picUrl=sellerPort+data.data.data.list[i].picUrl;//窗口图片\r\n\t\t\t\t\t\t\t\t_this.orderList.push(data.data.data.list[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t_this.$toast('已加载全部');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconsole.log('订单列表',_this.orderList);\r\n\t\t\t\t\t\tfor (var i=0;i<_this.orderList.length;i++) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// 订单状态\r\n\t\t\t\t\t\t\tif(_this.orderList[i].orderState==0){\r\n\t\t\t\t\t\t\t\t_this.orderList[i].orderType='用户取消订单';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(_this.orderList[i].orderState==1){\r\n\t\t\t\t\t\t\t\t_this.orderList[i].orderType='待支付';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(_this.orderList[i].orderState==2){\r\n\t\t\t\t\t\t\t\t_this.orderList[i].orderType='待商家接单';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(_this.orderList[i].orderState==3){\r\n\t\t\t\t\t\t\t\t_this.orderList[i].orderType='商家取消订单';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(_this.orderList[i].orderState==4){\r\n\t\t\t\t\t\t\t\tif(_this.orderList[i].orderMode!=2){\r\n\t\t\t\t\t\t\t\t\t_this.orderList[i].orderType='出餐中';\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t_this.orderList[i].orderType='待配送员接单';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(_this.orderList[i].orderState==5){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif(_this.orderList[i].outMealState==1){\r\n\t\t\t\t\t\t\t\t\t_this.orderList[i].orderType='待配送员取餐';\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t_this.orderList[i].orderType='出餐中';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(_this.orderList[i].orderState==6){\r\n\t\t\t\t\t\t\t\t_this.orderList[i].orderType='配送员已转单';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(_this.orderList[i].orderState==7){\r\n\t\t\t\t\t\t\t\tif(_this.orderList[i].orderMode==1){\r\n\t\t\t\t\t\t\t\t\t_this.orderList[i].orderType='自提中';\r\n\t\t\t\t\t\t\t\t}else if(_this.orderList[i].orderMode==3){\r\n\t\t\t\t\t\t\t\t\t_this.orderList[i].orderType='待用餐';\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tif(!_this.orderList[i].deliveryPersonId){\r\n\t\t\t\t\t\t\t\t\t\t_this.orderList[i].orderType='待配送员接单';\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t_this.orderList[i].orderType='待配送员取餐';\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(_this.orderList[i].orderState==8){\r\n\t\t\t\t\t\t\t\t_this.orderList[i].orderType='配送中';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(_this.orderList[i].orderState==9){\r\n\t\t\t\t\t\t\t\t_this.orderList[i].orderType='待评价';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(_this.orderList[i].orderState==10){\r\n\t\t\t\t\t\t\t\t_this.orderList[i].orderType='已评价';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//添加商品数量字段\r\n\t\t\t\t\t\t\tvar num=0;\r\n\t\t\t\t\t\t\tfor (var j=0;j<_this.orderList[i].orderGoodses.length;j++) {\r\n\t\t\t\t\t\t\t\tnum+=parseFloat(_this.orderList[i].orderGoodses[j].buyCounter);\r\n\t\t\t\t\t\t\t\t_this.orderList[i].goodsNum=num;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(data.data.status==600||data.data.status==601||data.data.status==602||data.data.status==603){\r\n\t\t\t\t\t\t_this.$toast('登录过期，请登录');\r\n\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t_this.$router.push({'path':'/login'})\r\n\t\t\t\t\t\t},2000)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(function(error){\r\n\t\t\t\t\t// _this.$toast('登录过期，请重新登录');\r\n\t\t\t\t\t// setTimeout(()=>{\r\n\t\t\t\t\t// \t_this.$router.push({'path':'/login'})\r\n\t\t\t\t\t// },2000)\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated:function(){\r\n\t\t\tif(!isLogin()){\r\n\t\t\t\tthis.$router.push({path:'/login'})\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar _this=this;\r\n\t\t\tpageNum=1;\r\n\t\t\t_this.orderList=[];\r\n\t\t\t_this.getOrder(pageNum)\r\n\t\t\t\r\n\t\t}\r\n\t};\r\n</script>\r\n<style type=\"text/css\">\r\n.order-list-wrap .shop-tit{position: relative;padding-right: 100px;}\r\n.order-list-wrap li{background: #fff;overflow: hidden;margin: 10px;padding: 10px;border-radius: 4px;}\r\n.win-tit-wrap{padding-right: 80px;position: relative;border-bottom: 1px solid #eee;padding-bottom: 10px;}\r\n.win-tit-wrap img{width: 50px;height: 50px;float: left;margin-right: 10px;}\r\n.win-name{line-height: 50px;font-size: 16px;color: #333;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;}\r\n.win-tit-wrap .state{position: absolute;right: 0;line-height: 50px;top: 0;font-size: 12px;color: #999;}\r\n\r\n.order-list p{color: #666;margin-top: 4px;}\r\n.order-total-wrap{text-align: right;}\r\n.order-total-wrap span:nth-child(1){margin-right: 10px;}\r\n.order-total-wrap .total{font-weight: bold;}\r\n.order-total-wrap{border-bottom: 1px solid #eee;padding-bottom: 5px;}\r\n.order-btn{text-align: right;}\r\n.order-btn span{font-size: 14px;color: #333;border: 1px solid #ddd;padding: 5px 10px;display: inline-block;border-radius: 5px;margin-right: 10px;margin-top: 10px;}\r\n.order-btn span:active{background: #f9f9f9;}\r\n.order-btn span:last-child{margin-right: 0;}\r\n\r\n.order-detail-top{background: #fff;text-align: center;margin: 10px;padding: 10px;border-radius: 6px;}\r\n.order-detail-top p{margin: 4px 0;}\r\n.order-detail-top .time{color: #FFBD27;}\r\n\r\n.seller-phone{text-align: center;padding: 10px;background: #fff;color: #333;display: block;border-top: 1px solid #eee;}\r\n.seller-phone .iconfont{color: #FFBD27;margin-right: 5px;}\r\n\r\n.seller-info{background: #fff;border-bottom: 1px solid #eee;padding: 15px;overflow: hidden;}\r\n.seller-info img{width: 40px;height: 40px;float: left;margin-right: 10px;}\r\n.seller-info p{overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}\r\n.seller-info p.seller-name{font-weight: bold;}\r\n\r\n.assess-item{background: #fff;margin: 10px;border-radius: 6px;padding: 10px;}\r\n.assess-item .head-img img{width: 40px;height: 40px;margin-right: 10px;}\r\n.assess-item .head-img{overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}\r\n\r\n.pleased-wrap{display: flex;margin-top: 10px;}\r\n.pleased-wrap span{flex: 1;text-align: center;height: 35px;line-height: 35px;background: #F5F5F5;border-radius: 4px;}\r\n.pleased-wrap span .iconfont{color: #999;margin-right: 6px;}\r\n.pleased-wrap span.active{background: #FEF9E6;color: #FFB200;}\r\n.pleased-wrap span.active .iconfont{color: #FFB200;}\r\n.pleased-wrap span:nth-child(1){margin-right: 10px;}\r\n\r\n.assess-msg{margin-top: 10px;}\r\n.assess-msg span{background: #f5f5f5;padding: 4px 8px;display: inline-block;margin-right: 10px;border-radius: 3px;font-size: 12px;margin-bottom: 10px;}\r\n.assess-msg span.active{background: #F4BE42;}\r\n\r\n.assess-star-wrap{margin:10px 0;}\r\n.assess-remark .van-cell{background: #f5f5f5;}\r\n.upload-img{margin-top: 10px;}\r\n\r\n.star-assess{margin-top: 5px;}\r\n.star-name{margin-right: 10px;vertical-align: super;}\r\n.assess-star-wrap .assessText{color: #999;margin-left: 10px;}\r\n\r\n.order-track-wrap{position: absolute;width: 100%;background: #fff;left: 0;bottom: 60px;border-radius: 6px;}\r\n.order-track-wrap .order-track-tit{padding: 10px;text-align: center;font-size: 16px;border-bottom: 1px solid #eee;}\r\n.order-track-wrap .order-track-main{height: 250px;overflow-y: auto;padding: 10px;box-sizing: border-box;}\r\n.order-track-cancel{padding: 10px;text-align: center;font-size: 16px;position: absolute;width: 100%;background: #fff;left: 0;bottom: 10px;border-radius: 6px;box-sizing: border-box;}\r\n\r\n.order-track-list li{position: relative;margin-bottom: 15px;}\r\n.order-track-list li .order-track-send-phone a{color: #F4BE42;}\r\n.order-track-list .order-track-item{display: flex;justify-content: space-between;padding-left: 20px;}\r\n.order-track-list li:before{content: '';position: absolute;width: 5px;height: 5px;background: #F4BE42;border-radius: 50%;left: 5px;top: 6px;}\r\n.order-track-list li:after{content: '';position: absolute;width: 1px;height: 120%;left: 7px;top: 14px;background: #F4BE42;}\r\n.order-track-list li:last-child:after{display: none;}\r\n.order-track-list .date{color: #999;font-size: 12px;}\r\n.order-track-send-phone{padding-left: 20px;margin-top: 4px;color: #666;}\r\n.cell-value{flex: none;}\r\n</style>"]}]}